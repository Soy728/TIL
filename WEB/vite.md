# Vite

<br /> !! vite 공부는 더 필요함
<br />
<br />

브라우저에서 ESM(ES Modules)을 지원하기 전까지는, JavaScript 모듈화를 네이티브 레벨에서 진행할 수 없었다. 따라서 개발자들은 "번들링(Bundling)\*"이라는 우회적인 방법을 사용할 수 밖에 없었다. webpack과 같은 도구는 이러한 번들링을 작업을 진행해준다.
하지만 js 모듈이 늘어남에따라 병목 현상이 발생된다.

webpack: cold start 방식(최초로 실행되어 이전에 캐싱한 데이터가 없는 경우)으로 모든 소스코드에 대해 크롤링 및 빌드 작업을 마쳐야지만 실제 페이지를 제공할 수 있다.
vite는 이러한 문제를 dependencies와 souececode를 분리하여 개발하며 해결하고자 한다.
<br />

- Dependencies: 개발 시 그 내용이 바뀌지 않을 일반적인(Plain) JavaScript 소스 코드. 기존 번들러로는 컴포넌트 라이브러리와 같이 몇 백 개의 JavaScript 모듈을 갖고 있는 매우 큰 디펜던시에 대한 번들링 과정이 매우 비효율적이었고 많은 시간을 필요로 했다.
  vite는 ESbuild를 통해 사전 번들링을 한다. (개빠름)

- source code: 컴파일링이 필요하고 수정이 매우 잦은 소스 코드인 경우, Native ESM을 이용해 소스 코드를 제공하도록 하고 있다. 브라우저가 곧 번들러이다(?)

조건부 동적 import이후의 코드는 현재 화면에서 실제로 사용이 되어야지만 처리된다.

![](../image/bundler.png)

### vite

vite는 자바스크립트 모듈(ES Module)을 기반으로 한 빌드 도구이다. 번들 생성 없이 ES 모듈을 바로 웹 브라우저에 렌더링 할 수 있다.

웹팩과 같은 모듈 번들러는 자바스크립트의 모듈화가 가능해지면서 여러개의 모듈을 묶어주는 번들링이 필요해지면서 사용하게 되었다.

vite는 로컬에서 개발할때 번들링을 하지 않고 ESM방식을 사용하기 때문에 매우 빠르다.
웹팩은 처음 로컬서버를 시작할 때 관련된모든 모듈들을 번들링해서 메모리에 적재하는 시간이 필요하다. 반면 vite는 번들링을 하지 않고 바로 서버를 실행한다.

dev server 시작 시간이 빠른 이유는 esbulid를 이용하여 종속성을 미리 묶기 때문

ESbuild를 가반으로 돌아간다.

### ESbuild

자바스크립트를 위한 번들러
vite에서는 사전 번들링에만 사용한다.

- Bundling & Code-spliting
  JavaScript 및 CSS 소스를 번들링하거나 코드 분할 할 수 있다.
  번들링은 배포하려는 경우에 사용된다.

코드 분할은 메인 파일인 app.js를 Sidebar.js, Header.js등의 파일로 세분화하는 방법이며 ES 모듈을 지원한다.

- Plugins
- 부분 컴파일
- watch mode
- serve mode

### Rollup

Esbuild는 극단적이게 빠른 속도로 번들링이 가능하다는 장점이 있으나, 번들링에 필수적으로 요구되는 기능인 코드 분할(Code-splitting) 및 CSS와 관련된 처리가 아직 미비합니다. Vite에서 사용중인 Rollup은 이에 대해 조금 더 검증되었고 유연한 처리가 가능하게끔 구현되어 있기에 현재로서는 이를 사용하고 있으며, 향후 Esbuild가 안정화 되었을 때 어떤 프로덕션 번들링 도구가 적절할 것인지 다시 논의할 예정입니다.
